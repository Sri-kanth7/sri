<!DOCTYPE html>  
<html>  
<head>  
  <title>Weather & Earthquake Alert</title>  
  <style>  
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }  
    button { padding: 10px 20px; background: #4CAF50; color: white; border: none; cursor: pointer; }  
    #result { margin-top: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }  
    .alert { color: red; font-weight: bold; }  
  </style>  
</head>  
<body>  
  <h1>Location Weather & Hazards</h1>  
  <button onclick="getLocation()">Check My Area</button>  
  <div id="result"></div>  

  <script>  
    const API_KEY = "YOUR_OPENWEATHERMAP_KEY"; // Replace this!  

    function getLocation() {  
      if (navigator.geolocation) {  
        navigator.geolocation.getCurrentPosition(showData, error => {  
          document.getElementById("result").innerHTML = `Error: ${error.message}`;  
        });  
      } else {  
        alert("Geolocation not supported in your browser.");  
      }  
    }  

    async function showData(position) {  
      const { latitude, longitude } = position.coords;  
      const weather = await fetchWeather(latitude, longitude);  
      const hazards = await fetchHazards(latitude, longitude);  

      document.getElementById("result").innerHTML = `  
        <h2>${weather.city}, ${weather.country}</h2>  
        <p>üå°Ô∏è Temperature: ${weather.temp}¬∞C (${weather.desc})</p>  
        <p>üíß Humidity: ${weather.humidity}%</p>  
        <p class="${hazards.alert ? 'alert' : ''}">  
          ‚ö†Ô∏è ${hazards.alert || "No recent earthquakes detected (100km radius)."}  
        </p>  
      `;  
    }  

    async function fetchWeather(lat, lon) {  
      const response = await fetch(  
        `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`  
      );  
      const data = await response.json();  
      return {  
        city: data.name,  
        country: data.sys?.country,  
        temp: data.main.temp,  
        desc: data.weather[0].description,  
        humidity: data.main.humidity  
      };  
    }  

    async function fetchHazards(lat, lon) {  
      try {  
        const response = await fetch(  
          `https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson&latitude=${lat}&longitude=${lon}&maxradiuskm=100&minmagnitude=4&limit=1`  
        );  
        const data = await response.json();  
        if (data.features.length > 0) {  
          const quake = data.features[0].properties;  
          return { alert: `Earthquake Alert! ${quake.mag} magnitude, ${quake.place} (${new Date(quake.time).toLocaleDateString()})` };  
        }  
        return { alert: null };  
      } catch (error) {  
        return { alert: "Error fetching hazard data." };  
      }  
    }  
  </script>  
</body>  
</html>  
